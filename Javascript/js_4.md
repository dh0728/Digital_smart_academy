# 4 함수와 스코프

## 4.1 프로그래밍의 꽃, 함수

### 왜 함수를 사용할까
포로그래밍에서 가장 중요한 것은 문제를 분석하는 것. 주어진 문제를 여러 작은 문제로 나눈 후 작은 문제를 하나씩 해결하면서 최종적으로 주어진 문제를 끝낸다. 가장 작은 단위로 나눈 것을 함수로 작성한다.

### 함수 선언 & 실행
함수를 선언할 때는 function이라는 예약어를 사용한다. 함수 이름을 적은 후 중괄호 안에 실행할 여러 명령들을 묶는다. 함수를 실행(호출)할 때는 함수 이름 뒤에 중괄호 ()를 붙인다.
```
//함수 선언
function 함수명() {
  명령(들)
}
//함수 실행
함수명()
```
#### 예시 (1부터 10까지 더하는 기능)
```
function calcSum() {
  let sum=0;
  for(let i=1; i<=10; i++){  
    sum += i
  }
  console.log(`1부터 10까지 더하면 $(sum)이다.`);
}
calcSum();
```
### 매게변수와 인수
매개변수와 인수를 통틀어서 '인자'라고도 한다.

#### 매개변수
1.함수를 선언할 때 외부에서 값을 받는 변수 <br>
2.함수 이름 옆의 괄호 안에 매개변수 이름을 넣어준다. <br>
3.매개변수에 이름을 붙이는 방법은 일반적인 변수 이름 붙이는 방법과 같다.<br>
4.매개변수는 선언된 함수에서만 사용한다. <br>
5.함수에 여래 개의 매개변수가 필요할 때에는 매개변수 사이의 쉼표(,)를 찍으면서 나열한다.

#### 인수
매개변수가 있는 함수를 실행할 떄, **매개변수로 값을 넘겨주는 변수**

### return 문
함수 안에서 실행하고 그 결과를 함수 밖에서 받아 처리해야 할 경우가 많다. 함수의 실행 결과를 함수를 실행한 시점으로 넘겨주는 것을 **'결과값을 반환한다.'** 라고 한다. 함수를 실행한 후 결과를 반환할 때는 예약어 return 다음에 넘겨줄 값이나 변수를 지정한다.

```
//예시
function calcSum(n) { //n:매개변수
  let sum=0;
  for(let i=1;i<=n;i++){
    sum +=i;
  }
  return sum;
}

let num=parseInt(prompt("몇가지 더할가요?"));
document.write(`1부터 $(num)까지 더하면 $(calcSum(num))입니다.`);
```

### 기본 매개변수
ES6에는 기본 매개변수가 있어서 함수를 정의할 때 매개변수의 기본값을 지정할 수 있다. 함수를 실행할 때 인수가 부족하면 기본값을 사용한다.
```
function multiple(a, b = 5, c = 10 ) {
  return a * b + c;
}
multiple(5, 10, 20) 
multiple(10, 20) 
multiple(10);        
```

## 4.2 변수의 유호 범위, 스코프
**스코프(scope) :** 선언한 변수의 적용 범위를 가르킨다. <br>
**var** 키워드를 사용한 변수는 함수 레벨 스코프이다. <br> 
**let, const** 키워드를 사용한 변수는 블록 레벨 스코프이다.

### var 변수의 스코프-함수 스코프
var 예약어를 사용해서 변수를 선언하면 해당 변수는 함수 스코프를 가진다. <br>
**함수 스코프**란 변수를 **선언한 함수에서만** 해당 변수를 사용할 수 있다는 의미인데, 이런 변수는 **지역 스코프**를 가진다. <br>
**프로그램 시작 부분**에서 **변수를 선언**하면  프로그램 전체에서 사용할 수 있다. 이런 변수는 **전역 스코프**를 가진다.
```
//지역 스코프 result
function sum(a,b) {
  var result= a +b;
}
console.log(result);

//전역 스코프를 가지는 함수
var hi="hello"

function greeting() {
  console.log(h1);
}
greeting();
```

### var 변수
함수에서 변수를 선언할 때 변수 이름 앞에 **var 예약어를 붙이지 않으면** 자바스크립트는 **전역 변수로 인식**한다. 때문에 실수로 var 예약어 없이 변수를 선언하면 전역 변수가 되어 엉뚱한 결과가 발생할 수 있다. 여러 함수에서 사용할 변수를 전역 번수로 지정하면 편리할 수 있지만 공동 작업을 할경우 예상치 못한 결과를 초래할 수 있다. 
```
function greeting() {
  hi = "hello";   // 실수로 var를 빠뜨렸다면  
}
greeting();
console.log(hi);  // 함수 밖에서 사용할 수 있다
```

### var 변수와 호이스팅
**호이스팅 :** 자바스크립트 해석기가 함수 소스를 훑어보면서 변수를 따로 기억해 두기 때문에, 소스 상에서는 나중에 선언하더라도 내부적으로 먼저 선언한 것처럼 인식하는 것. **변수 호이스팅**은 오류가 발생하지 않으면서 예상못한 결과를 만든다. **주의!!** 
```
var x = 10;
var sum = x + y; //변수 선언전에 사용
var y = 20;
console.log(`x : ${x}, y : ${y}, sum : ${sum}`);

//결과
x : 10, y : 20, sum : NaN
```
### let, const 변수의 스코프-블록 스코프
1.자바스크립트에서 이야기하는 블록은 {}로 둘러싸진 영역을 말한다.<br> 
2.블록별로 변수의 유효 범위가 결정되는 것을 블록 스코프(block scope)라고 한다. <br>
3.let이나 const를 사용해 만든 변수는 변수가 선언된 블록 안에서만 유효하다. (블록 변수)

### 자바스크립트 변수, 이렇게 사용하자!!
**var 변수보다 let, const 변수를 사용하자** <br>
여러 사람이 함께 진행하는 프로젝트라면 변수를 재선언 할 수도 없고 호이스팅도 없는 let이나 const 변수를 사용하는 것이 안전하다. <br>
**전역 변수를 최소한으로 사용하자**
가능하면 전역 변수의 사용을 줄이고, 프로그램에서 값이 변하지 않는다면 const로 선언하는 것이 좋다.<br>
**객체 선언은 const를 사용하자**
객체를 선언할 때에는 프로그램 중 객체 자체가 바뀌지 않도록 const를 사용해서 선언한다. 객체를 const로 선언해도 객체 안에 있는 프로퍼티는 얼마든지 수정할 수 있다.

## 4.3 함수 표현식

### 익명 함수
**익명 함수**이름이 없는 함수를 말한다. 익명함수는 함수 자체가 **식(expression)이므로 함수를 변수에 할당할 수 있고 다른 함수의 매개변수로 사용할 수 있다.
```
//익명 함수 실행
var sum =function (a, b) {
  return a+b;
}
document.write("함수 실행 결과:" + sum(10,20) );
```

### 즉시 실행 함수
한번만 사용하는 함수라면 선언과 동시에 실행할 수 있다. **즉시 실행 함수**는 함수가 실행하는 순간에 자바스크립트 해석기에서 함수를 해석한다.
```
//기본형1
(function(){
  명령
}());

//기본형2
(function(매게변수){
  명령
}(인수);
```
### 화살표 함수
**화살표 함수(에로우 함수)** 는 ES6버전 부터는 =>를 사용해 함수를 좀더 간단하게 선언한다. 화살 표 함수는 익명함수에서만 사용할 수 있다.
```
// 기본형
(매개변수) => {함수 내용}
```
#### 매개변수가 없는 경우
```
//익명 함수
const hi = function() {
  return "안녕하세요?";
}
//화살표 함수로 표현
const hi = () => { return "안녕하세요?"};
const hi = () => return "안녕하세요?"; //한줄이면 중괄호 생략 가능
```
#### 매개변수 있는 경우
```
// 매개변수 1개인 익명함수
let hi = function(user) {
  document.write(user + "님, 안녕하세요");
}

// 매개변수 1개인 화살표 함수로 변환
let hi = user => {
  document.write(user + "님, 안녕하세요");
}

// 매개변수 2개인 익명함수
let sum = function(a, b) {
  return a+b;
{

// 매개변수 2개인 화살표 함수로 변환
let sum = (a,b) => { a+b; }
```

### 콜백 함수  
콜백 함수는 다른 함수의 인자로 사용하는 함수이다. 
```
const bttn = document.querSelector("botton") //버튼 요소 가져오기

function display() {
  alert("클릭했습니다")
}
bttn.addEventListener("click",display); //버튼클릭시 display 함수 실행
```
#### 함수 안에 직접 콜백 함수 작성해 실행하기 
함수 안에서 한번만 실행한다면 함수 안에서 콜백 함수를 작성할 수 있다. 
```
const bttn= document.querySelector("button");

bttn.addEventListener("click",() => {
  alert("클랙했습니다.");
})
```

## 4.4 전걔 구문
값만 꺼내서 펼쳐주는 구분으로 마침펴 3개(...)를 사용해서 표현한다. 문자열이나 배열, 객체처럼 여러 값을 담고 있는 값만 꺼내 사용하려고 할 때 유용하다
```
fruits = ["apple", "banana", "grape"] 
console.log(...fruits) 

/// 결과(console창)
apple banana grape
```
### 나머지 매개변수
마침표 3개를 사용하는 전개 구문은 함수를 선언할 때도 사용한다. 함수를 선언하거나 나중에 몇 개의 인수를 받게 될지 알 수 없을 경우에, 매개변수 자리에 마침표 3개를 사용한다. 
```
function addNum(...number) {   
  let sum=0;

  for(let number of numbers)
    sum += number;

  return sum;
}
```
일부만 변수로 받고 나머지를 한꺼번에 묶어서 받는 것도 가능하다.

## 4.5 타이머 함수
**타이머 함수란** 특정 시간이 되었을 떄 함수를 실행하거나 특정 시간 동안 함수를 반복하기 위해서 시간을 재는 함수이다.  <br>
타이머 함수는 실행할 함수와 시간이 필요하다.-타이머 함수에서 실행할 함수를 인수로 받는다(콜백함수)

### setlnterval()-일정 시간마다 반복하기
```
//기본형
setInterval(콜백함수, 시간)

function greeting() {
  console.log("안녕하세요?")
}
setInterval(greeting,2000);

//화살표 함수로 표현
setlnterval( () => {console.log("안녕하세요?")},2000);
```

### clearInterval()-반복 실행 멈추기
setlnterval()함수는 한 번 실행하면 웹 브라우저를 종료하기 전까지 계속실행한다. 특정 조건이 되었을 경우 반복 실행을 멈추려면 clearInterval()을 사용한다.
```
//기본형
clearInterval(타이머)
```
setInterval()을 사용해서 반복 중인 함수를 **'타이머'** 라고 부른다. 반복 중인 함수를 변수에 저장하는 것을 **타이머 변수**라고 한다.
```
let timer = setInterval( () => {console.log("안녕")}, 2000);
```
#### clearInterval()예시
```

let counter=0;

let timer =setInterval( () => {    //타이머 시작
  console.log("안녕")
  counter++;                       //인사말 표시 1씩 증가
  if (counter ===5)
    clearInterval(timer)           //counter=5면 타이머 종
}, 2000);
```
### setTimeout()- 특정 시간후에 실행
지정한 시간이 흐른 후에 괄호 안에 있는 함수(콜백함수) 실행
```
//예시
setTimeout(콜백 함수,시간)

//예시
setTimeout(() => { 
  console.log("안녕하세요?") 
}, 3000);
```











